# Authentication service setup

This document provides instructions for setting up the authentication service for the Finance Calculator application.

## Prerequisites

Before you begin, ensure you have the following installed on your machine:

- Node.js (version 14 or higher)
- pnpm (Node Package Manager)
- A PostgreSQL database instance
- TypeScript (version 4.7 or higher)
- tsconfig base configurations from `@finance-calculator/typescript-configs`

## Steps to Set Up the Authentication Service

1. **Clone the Repository**:

   ```bash
   git clone <repository-url>
   ```

2. **Navigate to the Auth Service Directory**:

   ```bash
   cd backend/auth
   ```

3. **Install Dependencies**:

   ```bash
   pnpm install
   ```

4. **Set Up Environment Variables**:
   Create a `.env` file in the `backend/auth` directory and add the following variables:

   ```env
   PORT=4000
   DATABASE_URL=postgresql://user:password@localhost:5432/finance_calculator
   JWT_SECRET=your_jwt_secret
   ```

5. **Configure TypeScript**:
   Ensure your `tsconfig.json` extends the base configuration from `@finance-calculator/typescript-configs`:

   ```json
   {
     "extends": "@finance-calculator/typescript-configs/node",
     "compilerOptions": {
       "baseUrl": "./",
       "paths": {
         "@/controllers/*": ["./src/controllers/*"],
         "@/services/*": ["./src/services/*"],
         "@/models/*": ["./src/models/*"],
         "@/utils/*": ["./src/utils/*"]
       }
     },
     "include": ["src"],
     "exclude": ["node_modules", "dist"]
   }
   ```

6. **Run Database Migrations**:
   Ensure your PostgreSQL database is running and execute:

   ```bash
   pnpm run migrate
   ```

7. **Start the Authentication Service**:

   ```bash
   pnpm run dev
   ```

The service should now be running on `http://localhost:4000`.

## Service functionality overview

The authentication service provides very similar functionality as AWS Cognito, including:

- User registration and login
- JWT token generation and validation
- Password reset functionality
- Role-based access control
- Integration with other services via RESTful APIs
- Social login (Google, Facebook, etc.)
- Multi-factor authentication (MFA)
- User profile management
- Account verification via email
- Audit logging for security and compliance
- Rate limiting and brute-force attack protection
- Support for OAuth2 and OpenID Connect protocols
- Integration with third-party identity providers (IdPs)
- Session management
